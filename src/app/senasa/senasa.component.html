<div class="section-header">
    <h2>Senasa</h2>
    <button class="float-right" nbButton (click)="open()"><nb-icon icon="plus-outline"></nb-icon> Crear Nuevo</button>
</div>

<input fullWidth nbInput placeholder="Buscar" [nbFilterInput]="dataSource" id="search" class="search-input">

<table [nbTreeGrid]="dataSource" equalColumnsWidth>
    <tr nbTreeGridHeaderRow *nbTreeGridHeaderRowDef="allColumns"></tr>
    <tr nbTreeGridRow *nbTreeGridRowDef="let row; columns: allColumns"></tr>

    <ng-container nbTreeGridColumnDef="id">
      <th class="center" nbTreeGridHeaderCell *nbTreeGridHeaderCellDef>ID</th>
      <td class="center" nbTreeGridCell *nbTreeGridCellDef="let row">{{row.data['id']}}</td>
    </ng-container>

    <ng-container nbTreeGridColumnDef="denomination">
      <th class="center" nbTreeGridHeaderCell *nbTreeGridHeaderCellDef>Denominación</th>
      <td class="center" nbTreeGridCell *nbTreeGridCellDef="let row">{{row.data['denomination']}}</td>
    </ng-container>

    <ng-container nbTreeGridColumnDef="businessName">
      <th class="center" nbTreeGridHeaderCell *nbTreeGridHeaderCellDef>Nombre</th>
      <td class="center" nbTreeGridCell *nbTreeGridCellDef="let row">{{row.data['businessName']}}</td>
    </ng-container>

    <ng-container nbTreeGridColumnDef="country">
      <th class="center" nbTreeGridHeaderCell *nbTreeGridHeaderCellDef>País</th>
      <td class="center" nbTreeGridCell *nbTreeGridCellDef="let row">{{row.data['country']}}</td>
    </ng-container>

    <ng-container nbTreeGridColumnDef="certification">
      <th class="center" nbTreeGridHeaderCell *nbTreeGridHeaderCellDef>Certificación</th>
      <td class="center" nbTreeGridCell *nbTreeGridCellDef="let row">
        <nb-icon *ngIf="row.data['certification']" status="success" icon="checkmark-outline"></nb-icon>
        <nb-icon *ngIf="!row.data['certification']" status="danger" icon="close-outline"></nb-icon>
      </td>
    </ng-container>

    <ng-container nbTreeGridColumnDef="createdDate">
      <th class="center" nbTreeGridHeaderCell *nbTreeGridHeaderCellDef>Fecha de Creación</th>
      <td class="center" nbTreeGridCell *nbTreeGridCellDef="let row">{{row.data['createdDate'] | date: 'shortDate'}}</td>
    </ng-container>

    <ng-container nbTreeGridColumnDef="expirationDate">
      <th class="center" nbTreeGridHeaderCell *nbTreeGridHeaderCellDef>Fecha de Expiración</th>
      <td class="center" nbTreeGridCell *nbTreeGridCellDef="let row">{{row.data['expirationDate'] | date: 'shortDate'}}</td>
    </ng-container>

    <ng-container nbTreeGridColumnDef="product">
      <th class="center" nbTreeGridHeaderCell *nbTreeGridHeaderCellDef>Producto</th>
      <td class="center" nbTreeGridCell *nbTreeGridCellDef="let row">{{row?.data['product']?.name}}</td>
    </ng-container>

    <ng-container [nbTreeGridColumnDef]="customColumn">
        <th class="center" nbTreeGridHeaderCell *nbTreeGridHeaderCellDef>{{customColumn | titlecase}}</th>
        <td class="center" nbTreeGridCell *nbTreeGridCellDef="let row">
          <div class="action-container">
              <nb-icon (click)="update(row.data)" status="info" icon="edit-outline"></nb-icon>
              <nb-icon (click)="delete(row.data)" status="danger" icon="trash-outline"></nb-icon>
          </div>
        </td>
    </ng-container>
  
  </table>
